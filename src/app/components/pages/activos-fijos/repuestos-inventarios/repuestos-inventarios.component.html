<div class="container-fluid">
    <!-- ventana nro 3 - salida -->
    <div class="grid-container">

        <div class="title">Toma de Inventario Repuestos</div>

        <div class="find">
            <mat-card>
                <mat-card-header>
                    Corte en Toma de Inventario
                </mat-card-header>
                <mat-card-content>
                    <div class="row">
                        <div class="col-md-4">
                            <mat-form-field class="example-form-field2" appearance="fill">
                                <mat-label>Almacen</mat-label>
                                <mat-select [(ngModel)]="codAlmacen">
                                    <mat-option value="" selected hidden>Seleccione</mat-option>
                                    <mat-option value="H2">H2 - ALMACEN REP,MAT Y ECONO - HUACHIPA</mat-option>
                                    <mat-option value="HH">HH - Almacén de Rep. y Otros. NO VALORIZ.</mat-option>
                                    <mat-option value="HJ">HJ - Almacén de Repuestos y Suministros NO VALORIZ.</mat-option>
                                    <mat-option value="R2">R2 - ALMACEN REP,MAT Y ECO-HUACH2</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div class="col-md-3">
                            <button type="button" class="button_agregar" (click)="createCorte()" mat-flat-button
                                color="primary">
                                <mat-icon aria-label="person">save
                                </mat-icon> Crear Corte Inventario
                            </button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 tabla">
                            <table mat-table class="mat-elevation-z8" #table [dataSource]="dataSource">
                                <ng-container matColumnDef="idInventario">
                                    <th mat-header-cell *matHeaderCellDef class="mat-header-cell">Id Inventario</th>
                                    <td class="mat-header-cell" mat-cell *matCellDef="let data_det">
                                        {{data_det.idInventario}} </td>
                                </ng-container>
                                <ng-container matColumnDef="fechaRegistro">
                                    <th mat-header-cell *matHeaderCellDef class="mat-header-cell">F. Registro</th>
                                    <td class="mat-header-cell" mat-cell *matCellDef="let data_det">
                                        {{data_det.fechaRegistro | date:'dd/MM/y'}}
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="codUsuario">
                                    <th mat-header-cell *matHeaderCellDef class="mat-header-cell">Cod. Usuario</th>
                                    <td class="mat-header-cell" mat-cell *matCellDef="let data_det">
                                        {{data_det.codUsuario}} </td>
                                </ng-container>
                                <ng-container matColumnDef="codAlmacen">
                                    <th mat-header-cell *matHeaderCellDef class="mat-header-cell">Cod. Almacen</th>
                                    <td class="mat-header-cell" mat-cell *matCellDef="let data_det">
                                        {{data_det.codAlmacen}} </td>
                                </ng-container>
                                <ng-container matColumnDef="acciones">
                                    <th mat-header-cell *matHeaderCellDef class="mat-header-cell">Reporte</th>
                                    <td class="mat-header-cell" mat-cell *matCellDef="let data_det">
                                        <button type="button" (click)="exportarReporte(data_det)" class="button_agregar2" [disabled]="deshabilitar" mat-flat-button
                                            color="primary">
                                            <mat-icon aria-label="person">print
                                            </mat-icon> Exportar
                                        </button>     
                                    </td>
                                </ng-container>

                                <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
                                <tr mat-row *matRowDef="let row; columns: columnsToDisplay;"></tr>
                            </table>
                            <mat-paginator [pageSizeOptions]="[10, 20, 40]" showFirstLastButtons
                                aria-label="Select page of periodic elements">
                            </mat-paginator>
                        </div>
                    </div>
                </mat-card-content>
            </mat-card>
            <form class="auditoriaForm" [formGroup]="formulario" #formDirective="ngForm">
                <mat-card>
                    <mat-card-header>
                        Cabecera
                    </mat-card-header>
                    <mat-card-content>
                        <div class="findcol1">
                            <div class="padre">
                                <div class="caja24">
                                    <mat-form-field class="example-form-field2" appearance="fill">
                                        <mat-label>Almacen de Inventario</mat-label>
                                        <mat-select formControlName="codAlmacen">
                                            <mat-option value="" selected hidden>Seleccione</mat-option>
                                            <mat-option value="H2">H2 - ALMACEN REP,MAT Y ECONO - HUACHIPA</mat-option>
                                            <mat-option value="HH">HH - Almacén de Rep. y Otros. NO VALORIZ.</mat-option>
                                            <mat-option value="HJ">HJ - Almacén de Repuestos y Suministros NO VALORIZ.</mat-option>
                                            <mat-option value="R2">R2 - ALMACEN REP,MAT Y ECO-HUACH2</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                        <div class="findcol1">
                            <div class="padre">
                                <div class="caja24">
                                    <mat-form-field class="example-full-width2" appearance="fill">
                                        <mat-label>Ubicación Física *</mat-label>
                                        <input matInput formControlName="ubicacion" [readonly]="dataFijar.ubicacion">
                                    </mat-form-field>
                                    <mat-checkbox class="example-margin" (change)="FijarCabecera($event, 'ubicacion')"
                                        [checked]="dataFijar.ubicacion">Fijar
                                    </mat-checkbox>
                                </div>

                            </div>
                        </div>
                        <div class="findcol1">
                            <div class="padre">
                                <div class="caja24">
                                    <mat-form-field class="example-full-width2" appearance="fill">
                                        <mat-label>Código Artículo *</mat-label>
                                        <input matInput formControlName="codItem" maxlength="8" (change)="changeCodItem($event)">
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                        <div class="findcol1">
                            <div class="padre">
                                <div class="caja24">
                                    <mat-form-field class="example-full-width2" appearance="fill">
                                        <mat-label>Descripción *</mat-label>
                                        <input matInput formControlName="descripcion" readonly>
                                    </mat-form-field>
                                </div>

                            </div>
                        </div>
                        <div class="findcol1">
                            <div class="padre">
                                <div class="caja24">
                                    <mat-form-field class="example-full-width2" appearance="fill">
                                        <mat-label>Conteo *</mat-label>
                                        <input matInput formControlName="conteo" (input)="inputConteo()">
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                        <div class="findcol1">
                            <div class="padre">
                                <div class="caja24">
                                    <mat-form-field class="example-full-width2" appearance="fill" >
                                        <mat-label>Stock Sistema *</mat-label>
                                        <input matInput formControlName="stock" readonly>
                                    </mat-form-field>
                                </div>

                            </div>
                        </div>
                        <div class="findcol1">
                            <div class="padre">
                                <div class="caja24">
                                    <mat-form-field class="example-full-width2" appearance="fill">
                                        <mat-label>Unidad Medida *</mat-label>
                                        <input matInput formControlName="unidadMedida" readonly>
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                        <div class="findcol1">
                            <div class="padre">
                                <div class="caja24">
                                    <mat-form-field class="example-full-width2" appearance="fill">
                                        <mat-label>Diferencia *</mat-label>
                                        <input matInput formControlName="diferencia" readonly>
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>

                    </mat-card-content>

                    <mat-card-footer>
                        <div class="findcol1">
                            <div class="caja">
                                <button type="button" class="button_agregar" [disabled]="deshabilitar" (click)="guardarRegistro()" mat-flat-button
                                    color="primary">
                                    <mat-icon aria-label="person">save
                                    </mat-icon> Guardar
                                </button>

                            </div>
               
                            <div class="caja">
                                <button type="button" class="button_info" (click)="nuevoRegistro()" mat-flat-button
                                    color="primary">
                                    <mat-icon aria-label="person">cached
                                    </mat-icon> Nuevo
                                </button>
                            </div>
                        </div>
                    </mat-card-footer>
                </mat-card>
            </form>
        </div>
    </div>
</div>